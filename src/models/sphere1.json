{
  "id": 5866,
  "name": "New Composed Shader",
  "fragment": "#define iterations 17\n#define volsteps 3\n#define sparsity 0.5\n#define stepsize 0.2\n#define frequencyVariation 1.3\n#define PI 3.141592653589793238462643383279\n\n#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nuniform vec3 New_Basic_Shader1654676621375_237_color;\nuniform vec3 New_Basic_Shader1654676621375_237_lightPosition;\nuniform vec3 Fork_of_Universe_Nursery1654676654033_248_color;\nuniform float twinkleSpeed;\nuniform float speed;\nuniform float brightness;\nuniform float distfading;\nuniform vec3 LightStrength1654676671468_276_color;\nuniform vec3 LightStrength1654676671468_276_lightPosition;\nuniform vec3 ambientColor;\nvarying vec3 New_Basic_Shader1654676621375_237_vPosition;\nvarying vec3 New_Basic_Shader1654676621375_237_vNormal;\nvarying vec2 New_Basic_Shader1654676621375_237_vUv;\nvarying vec2 New_Basic_Shader1654676621375_237_vUv2;\nvarying vec2 Fork_of_Universe_Nursery1654676654033_248_vUv;\nvarying vec3 Fork_of_Universe_Nursery1654676654033_248_vPosition;\nvarying vec3 Fork_of_Universe_Nursery1654676654033_248_vNormal;\nvarying vec3 LightStrength1654676671468_276_vPosition;\nvarying vec3 LightStrength1654676671468_276_vNormal;\nvarying vec2 LightStrength1654676671468_276_vUv;\nvarying vec2 LightStrength1654676671468_276_vUv2;\nfloat md(float a, float b) \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                return a - (b * floor(a / b));\n                                                                                                                                                                                                                                                                                            }\nfloat md2(float b2, float a2) \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                return b2 - (a2 * floor(b2 / a2));\n                                                                                                                                                                                                                                                                                            }\nfloat random2d(vec2 coord) \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                return fract(sin(dot(coord.xy, vec2(12.9898, 78.233)))) * 43758.5453;\n                                                                                                                                                                                                                                                                                            }\nvec4 New_Basic_Shader1654676621375_237_main() \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                vec4 New_Basic_Shader1654676621375_237_gl_FragColor = vec4(0.0);\n                                                                                                                                                                                                                                                                                                vec3 worldPosition = (modelMatrix * vec4(New_Basic_Shader1654676621375_237_vPosition, 1.0)).xyz;\n                                                                                                                                                                                                                                                                                                vec3 worldNormal = normalize(vec3(modelMatrix * vec4(New_Basic_Shader1654676621375_237_vNormal, 0.0)));\n                                                                                                                                                                                                                                                                                                vec3 lightVector = normalize(New_Basic_Shader1654676621375_237_lightPosition - worldPosition);\n                                                                                                                                                                                                                                                                                                float brightness = dot(worldNormal, lightVector);\n                                                                                                                                                                                                                                                                                                float NdotL = dot(worldNormal, lightVector) * 0.5 + 0.5;\n                                                                                                                                                                                                                                                                                                New_Basic_Shader1654676621375_237_gl_FragColor = vec4(NdotL, NdotL, NdotL, 1.0);\n                                                                                                                                                                                                                                                                                                return New_Basic_Shader1654676621375_237_gl_FragColor *= 1.0;\n                                                                                                                                                                                                                                                                                            }\nvec4 Fork_of_Universe_Nursery1654676654033_248_main(void) \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                vec4 Fork_of_Universe_Nursery1654676654033_248_gl_FragColor = vec4(0.0);\n                                                                                                                                                                                                                                                                                                vec2 uv = Fork_of_Universe_Nursery1654676654033_248_vUv.xy + 0.5;\n                                                                                                                                                                                                                                                                                                uv.x += time * speed * 0.1;\n                                                                                                                                                                                                                                                                                                vec3 dir = vec3(uv * 2.0, 1.0);\n                                                                                                                                                                                                                                                                                                float s = 0.1, fade = 0.01;\n                                                                                                                                                                                                                                                                                                vec3 starColor = vec3(0.0);\n                                                                                                                                                                                                                                                                                                for (int r = 0;\n r < volsteps; ++r) \n                                                                                                                                                                                                                                                                                                {\n                                                                                                                                                                                                                                                                                                    vec3 p = (time * speed * twinkleSpeed) + dir * (s * 0.5);\n                                                                                                                                                                                                                                                                                                    p = abs(vec3(frequencyVariation) - mod(p, vec3(frequencyVariation * 2.0)));\n                                                                                                                                                                                                                                                                                                    float prevlen = 0.0, a = 0.0;\n                                                                                                                                                                                                                                                                                                    for (int i = 0;\n i < iterations; ++i) \n                                                                                                                                                                                                                                                                                                    {\n                                                                                                                                                                                                                                                                                                        p = abs(p);\n                                                                                                                                                                                                                                                                                                        p = p * (0.6 / dot(p, p)) + (-sparsity);\n                                                                                                                                                                                                                                                                                                        float len = length(p);\n                                                                                                                                                                                                                                                                                                        a += abs(len - prevlen);\n                                                                                                                                                                                                                                                                                                        prevlen = len;\n                                                                                                                                                                                                                                                                                                    }\n                                                                                                                                                                                                                                                                                                    a *= a * a / 7.0;\n                                                                                                                                                                                                                                                                                                    starColor += vec3(.01);\n                                                                                                                                                                                                                                                                                                    starColor += (vec3(s, s * s, s * s * s) * a * brightness + 1.0) * fade;\n                                                                                                                                                                                                                                                                                                    fade *= distfading;\n                                                                                                                                                                                                                                                                                                    s += stepsize;\n                                                                                                                                                                                                                                                                                                }\n                                                                                                                                                                                                                                                                                                starColor = min(starColor, vec3(1.2));\n                                                                                                                                                                                                                                                                                                float intensity = min(starColor.r + starColor.g + starColor.b, 0.7);\n                                                                                                                                                                                                                                                                                                vec2 sgn = vec2(Fork_of_Universe_Nursery1654676654033_248_vUv.xy) * 2.0 - 1.0;\n                                                                                                                                                                                                                                                                                                vec2 gradient = vec2(dFdx(intensity) * sgn.x, dFdy(intensity) * sgn.y);\n                                                                                                                                                                                                                                                                                                float cutoff = max(max(gradient.x, gradient.y) - 0.1, 0.0);\n                                                                                                                                                                                                                                                                                                starColor *= max(1.0 - cutoff * 6.0, 0.3);\n                                                                                                                                                                                                                                                                                                Fork_of_Universe_Nursery1654676654033_248_gl_FragColor = vec4(starColor * Fork_of_Universe_Nursery1654676654033_248_color, 1.0);\n                                                                                                                                                                                                                                                                                                return Fork_of_Universe_Nursery1654676654033_248_gl_FragColor *= 1.0;\n                                                                                                                                                                                                                                                                                            }\nvec4 LightStrength1654676671468_276_main() \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                vec4 LightStrength1654676671468_276_gl_FragColor = vec4(0.0);\n                                                                                                                                                                                                                                                                                                float lightStrength = dot(normalize(vec3(sin(time), 0.2, 1) - LightStrength1654676671468_276_vPosition), LightStrength1654676671468_276_vNormal);\n                                                                                                                                                                                                                                                                                                float x = md2(LightStrength1654676671468_276_vUv.x * 50.0, 50.0);\n                                                                                                                                                                                                                                                                                                float y = md2(LightStrength1654676671468_276_vUv.y * 50.0, 25.0);\n                                                                                                                                                                                                                                                                                                float z = md(LightStrength1654676671468_276_vUv.x * 50.0, 5.0);\n                                                                                                                                                                                                                                                                                                vec4 color;\n                                                                                                                                                                                                                                                                                                if (y <= 35.0) \n                                                                                                                                                                                                                                                                                                {\n                                                                                                                                                                                                                                                                                                    color = vec4(ambientColor.x, ambientColor.y, ambientColor.z, 1.0);\n                                                                                                                                                                                                                                                                                                }\n else \n                                                                                                                                                                                                                                                                                                {\n                                                                                                                                                                                                                                                                                                    color = vec4(ambientColor.z, ambientColor.y, ambientColor.y, 1.0);\n                                                                                                                                                                                                                                                                                                }\n                                                                                                                                                                                                                                                                                                LightStrength1654676671468_276_gl_FragColor = vec4((color + lightStrength));\n                                                                                                                                                                                                                                                                                                return LightStrength1654676671468_276_gl_FragColor *= 1.0;\n                                                                                                                                                                                                                                                                                            }\nvoid main() \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                gl_FragColor = (New_Basic_Shader1654676621375_237_main() + Fork_of_Universe_Nursery1654676654033_248_main() + LightStrength1654676671468_276_main());                                                                                                                                                                                                                                                                                            }\n",
  "vertex": "precision highp float;\nprecision highp int;\nuniform mat4 modelMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nuniform float time;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nvarying vec3 New_Basic_Shader1654676621375_237_vPosition;\nvarying vec3 New_Basic_Shader1654676621375_237_vNormal;\nvarying vec2 New_Basic_Shader1654676621375_237_vUv;\nvarying vec2 New_Basic_Shader1654676621375_237_vUv2;\nvarying vec2 Fork_of_Universe_Nursery1654676654033_248_vUv;\nvarying vec3 Fork_of_Universe_Nursery1654676654033_248_vPosition;\nvarying vec3 Fork_of_Universe_Nursery1654676654033_248_vNormal;\nvarying vec3 LightStrength1654676671468_276_vPosition;\nvarying vec3 LightStrength1654676671468_276_vNormal;\nvarying vec2 LightStrength1654676671468_276_vUv;\nvarying vec2 LightStrength1654676671468_276_vUv2;\nvec4 New_Basic_Shader1654676621375_237_main() \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                vec4 New_Basic_Shader1654676621375_237_gl_Position = vec4(0.0);\n                                                                                                                                                                                                                                                                                                New_Basic_Shader1654676621375_237_vNormal = normal;\n                                                                                                                                                                                                                                                                                                New_Basic_Shader1654676621375_237_vUv = uv;\n                                                                                                                                                                                                                                                                                                New_Basic_Shader1654676621375_237_vUv2 = uv2;\n                                                                                                                                                                                                                                                                                                New_Basic_Shader1654676621375_237_vPosition = position;\n                                                                                                                                                                                                                                                                                                New_Basic_Shader1654676621375_237_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                                                                                                                                                                                                                                                                                                return New_Basic_Shader1654676621375_237_gl_Position *= 1.0;\n                                                                                                                                                                                                                                                                                            }\nvec4 Fork_of_Universe_Nursery1654676654033_248_main() \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                vec4 Fork_of_Universe_Nursery1654676654033_248_gl_Position = vec4(0.0);\n                                                                                                                                                                                                                                                                                                Fork_of_Universe_Nursery1654676654033_248_vUv = uv;\n                                                                                                                                                                                                                                                                                                Fork_of_Universe_Nursery1654676654033_248_vPosition = position;\n                                                                                                                                                                                                                                                                                                Fork_of_Universe_Nursery1654676654033_248_vNormal = normal;\n                                                                                                                                                                                                                                                                                                Fork_of_Universe_Nursery1654676654033_248_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                                                                                                                                                                                                                                                                                                return Fork_of_Universe_Nursery1654676654033_248_gl_Position *= 1.0;\n                                                                                                                                                                                                                                                                                            }\nvec4 LightStrength1654676671468_276_main() \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                vec4 LightStrength1654676671468_276_gl_Position = vec4(0.0);\n                                                                                                                                                                                                                                                                                                LightStrength1654676671468_276_vNormal = normal;\n                                                                                                                                                                                                                                                                                                LightStrength1654676671468_276_vUv = uv;\n                                                                                                                                                                                                                                                                                                LightStrength1654676671468_276_vUv2 = uv2;\n                                                                                                                                                                                                                                                                                                LightStrength1654676671468_276_vPosition = position;\n                                                                                                                                                                                                                                                                                                LightStrength1654676671468_276_gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                                                                                                                                                                                                                                                                                                return LightStrength1654676671468_276_gl_Position *= 1.0;\n                                                                                                                                                                                                                                                                                            }\nvoid main() \n                                                                                                                                                                                                                                                                                            {\n                                                                                                                                                                                                                                                                                                gl_Position = New_Basic_Shader1654676621375_237_main() + Fork_of_Universe_Nursery1654676654033_248_main() + LightStrength1654676671468_276_main();                                                                                                                                                                                                                                                                                            }\n",
  "uniforms": {
    "cameraPosition": {
      "type": "v3",
      "glslType": "vec3"
    },
    "time": {
      "type": "f",
      "glslType": "float"
    },
    "New_Basic_Shader1654676621375_237_color": {
      "value": {
        "r": 0.6823529411764706,
        "g": 0.8862745098039215,
        "b": 0.2235294117647059
      },
      "type": "c",
      "glslType": "vec3"
    },
    "New_Basic_Shader1654676621375_237_lightPosition": {
      "value": {
        "x": 0,
        "y": 1.25,
        "z": 1.25
      },
      "type": "v3",
      "glslType": "vec3"
    },
    "speed": {
      "value": ".00005",
      "type": "f",
      "glslType": "float"
    },
    "brightness": {
      "value": "0.018",
      "type": "f",
      "glslType": "float"
    },
    "distfading": {
      "value": "0.3",
      "type": "f",
      "glslType": "float"
    },
    "twinkleSpeed": {
      "value": "20",
      "type": "f",
      "glslType": "float"
    },
    "Fork_of_Universe_Nursery1654676654033_248_color": {
      "value": {
        "r": 1,
        "g": "1",
        "b": 1
      },
      "type": "c",
      "glslType": "vec3"
    },
    "ambientColor": {
      "value": {
        "r": 0.9254901960784314,
        "g": 0.14901960784313725,
        "b": 0.09411764705882353
      },
      "type": "c",
      "glslType": "vec3"
    },
    "LightStrength1654676671468_276_color": {
      "value": {
        "r": 0.4503260963065756,
        "g": 0.5090043237405621,
        "b": 0.29274079015884946
      },
      "type": "c",
      "glslType": "vec3"
    },
    "LightStrength1654676671468_276_lightPosition": {
      "value": {
        "x": 0,
        "y": 0,
        "z": 0
      },
      "type": "v3",
      "glslType": "vec3"
    }
  },
  "url": "http://shaderfrog.com/app/view/5866",
  "user": {
    "username": "Loic",
    "url": "http://shaderfrog.com/app/profile/andrewray"
  }
}